<% var x=new Date(date); var last=new Date(x.toDateString()); last.setDate(last.getDate()+6-last.getDay()); x.setDate(x.getDate()-x.getDay());%>
<%var week=['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];%>
<% if(x.getMonth()===last.getMonth()){%>
<h4><%=x.toLocaleString('default',{month:'long'}) %> <%=x.getFullYear()%></h4>
<%}else{%>
<h4><%=x.toLocaleString('default',{month:'short'}) %> <%=x.getFullYear()%> - <%=last.toLocaleString('default',{month:'short'}) %> <%=last.getFullYear()%></h4>
<%} var today=new Date();%>
<div class="table-responsive">
    <table class="table table-striped table-bordered table-light table-hover">
        <thead >
            <tr>
                <th scope="col" width="20%"></th>
                <% week.forEach(function(day){%>
                    <th scope="col"><%=day%></th>
                <%})%>
            </tr>
            <tr class="thead-dark">
                <th scope="col" width="20%">Time</th>
                <%for(var i=0;i<=6;i++){%>     
                    <% if(x.toDateString()==today.toDateString()){%>
                        <th scope="col" class="weekbtn bg-primary" id="<%=x.toDateString()%>"><%=x.getDate()%></th>
                        <%}else{%>      
                <th scope="col" class="weekbtn" id="<%=x.toDateString()%>"><%=x.getDate()%></th>
                <%}%>
                <%x.setDate(x.getDate()+1)%>
                <%}%>
            </tr>
        </thead>
        <tbody>
            <% for(var i=1;i<=12;i++){%>
                <tr>
                    <th scope="row"><%=i%> AM</th> 
                    <td>Mark</td>               
                </tr>
            <%}%>
            <% for(var i=1;i<=11;i++){%>
                <tr>
                    <th scope="row"><%=i%> PM</th> 
                    <td>Mark</td>               
                </tr>
            <%}%>
        </tbody>
    </table>
    </div>